<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>KIF Twitter-Wall</title>
<link rel="stylesheet" type="text/css" href="twitterwall.css">
<script type="text/javascript">
 var poll_delay = 10;
 var content_div;
 var countdown_span;

var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp = new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

 function start_reloading()
 {
   content_div = document.getElementById("content");
   countdown_span = document.getElementById("countdown");
   reload_content();
   window.setInterval("start_reload_content()", poll_delay * 1000);
 }

 function start_reload_content()
 {
    countdown(3);
    start_timeout(function(){countdown(2)}, 100);
    start_timeout("reload_content", 200);
 }

 function reload_content()
 {
    countdown(0);
    xmlhttp.open("GET","getcontent.php",false);
    xmlhttp.send();
    var result = xmlhttp.responseText;
    if(result.length)
    {
      content_div.innerHTML = result;
    }
 }

 function countdown(param)
 {
   if(param > 0)
    countdown_span.innerHTML = "Reloading in "+param+"...";
   else
    countdown_span.innerHTML = "";
 }

 function countdown
</script>
</head>
<body onload="javascript:start_reloading();">
<div id="content">

</div>
<div class="bottom" id="countdown"></div>
</body>
</html>


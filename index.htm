<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>KIF Twitter-Wall</title>
<link rel="stylesheet" type="text/css" href="twitterwall.css">
<script type="text/javascript">
 var poll_delay = 10;
 var content_div;
 var countdown_span;

HTTP_GET_VARS=new Array();
strGET=document.location.search.substr(1,document.location.search.length);
if(strGET!='')
    {
    gArr=strGET.split('&');
    for(i=0;i<gArr.length;++i)
        {
        v='';vArr=gArr[i].split('=');
        if(vArr.length>1){v=vArr[1];}
        HTTP_GET_VARS[unescape(vArr[0])]=unescape(v);
        }
    }
 
function GET(v)
{
if(!HTTP_GET_VARS[v]){return 'undefined';}
return HTTP_GET_VARS[v];
}
 
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp = new XMLHttpRequest();
}
else
{// code for IE6, IE5
  xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

 function start_reloading()
 {
   content_div = document.getElementById("content");
   countdown_span = document.getElementById("countdown");
   reload_content();
   window.setInterval("start_reload_content()", poll_delay * 1000);
 }

 function start_reload_content()
 {
    countdown(3);
 }

 function reload_content()
 {
    xmlhttp.open("GET","getcontent.php?key=" + GET(["key"]),false);
    xmlhttp.send();
    var result = xmlhttp.responseText;
    if(result.length)
    {
      content_div.innerHTML = result;
    }
 }

 function countdown(param)
 {
   if(param > 0)
   {
     countdown_span.innerHTML = "Reloading in "+param+"...";
     setTimeout(function(){countdown(param-1)}, 1000);
   }
   else
   {
     countdown_span.innerHTML = "";
     reload_content();
   }
 }
</script>
</head>
<body onload="javascript:start_reloading();">
<h2>Twitterwall: <?php $_GET["key"]; ?></h2>
<div id="content">

</div>
<div class="bottom">
 <div id="countdown"></div>
</div>
</body>
</html>

